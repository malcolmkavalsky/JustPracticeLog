Index: .idea/misc.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- .idea/misc.xml	(revision 34207d752b92643b26623e0458fbc6c60e8112d4)
+++ .idea/misc.xml	(revision )
@@ -37,7 +37,7 @@
     <ConfirmationsSetting value="0" id="Add" />
     <ConfirmationsSetting value="0" id="Remove" />
   </component>
-  <component name="ProjectRootManager" version="2" languageLevel="JDK_1_7" default="true" assert-keyword="true" jdk-15="true" project-jdk-name="1.8" project-jdk-type="JavaSDK">
+  <component name="ProjectRootManager" version="2" languageLevel="JDK_1_8" default="true" assert-keyword="true" jdk-15="true" project-jdk-name="1.8" project-jdk-type="JavaSDK">
     <output url="file://$PROJECT_DIR$/build/classes" />
   </component>
   <component name="ProjectType">
\ No newline at end of file
Index: app/src/main/java/com/example/malcolm/justpracticelog/PracticeSessionActivity.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/java/com/example/malcolm/justpracticelog/PracticeSessionActivity.java	(revision 34207d752b92643b26623e0458fbc6c60e8112d4)
+++ app/src/main/java/com/example/malcolm/justpracticelog/PracticeSessionActivity.java	(revision )
@@ -30,14 +30,18 @@
     PracticeTimer myTimer;
     PracticeNotes myNotes;
     ImageButton addNoteButton;
+    final static String TAG = "Practice";
+    long pieceId = 0;
+    int elapsedSeconds = 0;
+    int secondsRemaining;
 
     @Override
     protected void onCreate(Bundle savedInstanceState) {
-        long pieceId = 0;
-        int secondsRemaining = 900;
+        Log.d(TAG, "onCreate");
 
         super.onCreate(savedInstanceState);
         setContentView(R.layout.activity_practice_session);
+
         editTextManual = (EditText) findViewById(R.id.editTextManual);
         editTextManual.setCursorVisible(false);
 
@@ -49,7 +53,7 @@
         Bundle bundle = getIntent().getExtras();
         Set<String> keys = bundle.keySet();
         // We receive pieceid
-       if (keys.contains("pieceid")) {
+        if (keys.contains("pieceid")) {
             pieceId = bundle.getLong("pieceid");
             currentPlan = Plan.getForPieceId(pieceId);
             if (currentPlan != null) {
@@ -59,28 +63,51 @@
                 secondsRemaining = (currentPlan.getMinutes() - practiced) * 60;
                 if (secondsRemaining < 0)
                     secondsRemaining = 0;
-            } else
+                editTextManual.setText(Integer.toString(currentPlan.getMinutes()));
+            } else {
+                secondsRemaining = 900;
                 editTextGoal.setText("No goal");
-        }
+            }
+        }
 
         currentPiece = new Piece(pieceId);
 
         ((TextView) findViewById(R.id.textViewTitle)).setText(currentPiece.getName());
         Composer composer = new Composer(currentPiece.getComposerId());
         ((TextView) findViewById(R.id.textViewSubtitle)).setText(composer.getName());
+    }
 
+    protected void resumeScreen() {
         myMetronome = new PracticeMetronome(this);
-        myTimer = new PracticeTimer(this, secondsRemaining);
+        myTimer = new PracticeTimer(this,secondsRemaining, elapsedSeconds );
         myNotes = new PracticeNotes(this, pieceId);
 
     }
 
+    public void onPause() {
+        super.onPause();
+        Log.d(TAG, "onPause");
+
+    }
+    @Override
+    public void onResume() {
+        super.onResume();
+        Log.d(TAG, "onResume");
+        resumeScreen();
+    }
     public void onStop() {
+        Log.d(TAG, "onStop");
+        closeAll();
+        super.onStop();
+    }
+
+    public void closeAll() {
         myMetronome.close();
+        elapsedSeconds = myTimer.getElapsedSeconds();
+        secondsRemaining -= elapsedSeconds;
         myTimer.close();
-        if( myNotes != null)
+        // myRecorder.close();
-            myNotes.close();
+        myNotes.close();
-        super.onStop();
     }
 
     public void backButtonHandler(View v) {
Index: .idea/libraries/appcompat_v7_22_2_0.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- .idea/libraries/appcompat_v7_22_2_0.xml	(revision 34207d752b92643b26623e0458fbc6c60e8112d4)
+++ .idea/libraries/appcompat_v7_22_2_0.xml	(revision )
@@ -1,11 +1,11 @@
 <component name="libraryTable">
   <library name="appcompat-v7-22.2.0">
     <ANNOTATIONS>
-      <root url="jar://$PROJECT_DIR$/app/build/intermediates/exploded-aar/com.android.support/appcompat-v7/22.2.0/annotations.zip!/" />
+      <root url="jar://$USER_HOME$/Dvlp/AndroidStudioProjects/JustPracticeLog/app/build/intermediates/exploded-aar/com.android.support/appcompat-v7/22.2.0/annotations.zip!/" />
     </ANNOTATIONS>
     <CLASSES>
-      <root url="file://$PROJECT_DIR$/app/build/intermediates/exploded-aar/com.android.support/appcompat-v7/22.2.0/res" />
-      <root url="jar://$PROJECT_DIR$/app/build/intermediates/exploded-aar/com.android.support/appcompat-v7/22.2.0/jars/classes.jar!/" />
+      <root url="file://$USER_HOME$/Dvlp/AndroidStudioProjects/JustPracticeLog/app/build/intermediates/exploded-aar/com.android.support/appcompat-v7/22.2.0/res" />
+      <root url="jar://$USER_HOME$/Dvlp/AndroidStudioProjects/JustPracticeLog/app/build/intermediates/exploded-aar/com.android.support/appcompat-v7/22.2.0/jars/classes.jar!/" />
     </CLASSES>
     <JAVADOC />
     <SOURCES>
\ No newline at end of file
Index: .idea/libraries/support_v4_22_2_0.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- .idea/libraries/support_v4_22_2_0.xml	(revision 34207d752b92643b26623e0458fbc6c60e8112d4)
+++ .idea/libraries/support_v4_22_2_0.xml	(revision )
@@ -1,12 +1,12 @@
 <component name="libraryTable">
   <library name="support-v4-22.2.0">
     <ANNOTATIONS>
-      <root url="jar://$PROJECT_DIR$/app/build/intermediates/exploded-aar/com.android.support/support-v4/22.2.0/annotations.zip!/" />
+      <root url="jar://$USER_HOME$/Dvlp/AndroidStudioProjects/JustPracticeLog/app/build/intermediates/exploded-aar/com.android.support/support-v4/22.2.0/annotations.zip!/" />
     </ANNOTATIONS>
     <CLASSES>
-      <root url="jar://$PROJECT_DIR$/app/build/intermediates/exploded-aar/com.android.support/support-v4/22.2.0/jars/libs/internal_impl-22.2.0.jar!/" />
-      <root url="file://$PROJECT_DIR$/app/build/intermediates/exploded-aar/com.android.support/support-v4/22.2.0/res" />
-      <root url="jar://$PROJECT_DIR$/app/build/intermediates/exploded-aar/com.android.support/support-v4/22.2.0/jars/classes.jar!/" />
+      <root url="jar://$USER_HOME$/Dvlp/AndroidStudioProjects/JustPracticeLog/app/build/intermediates/exploded-aar/com.android.support/support-v4/22.2.0/jars/libs/internal_impl-22.2.0.jar!/" />
+      <root url="file://$USER_HOME$/Dvlp/AndroidStudioProjects/JustPracticeLog/app/build/intermediates/exploded-aar/com.android.support/support-v4/22.2.0/res" />
+      <root url="jar://$USER_HOME$/Dvlp/AndroidStudioProjects/JustPracticeLog/app/build/intermediates/exploded-aar/com.android.support/support-v4/22.2.0/jars/classes.jar!/" />
     </CLASSES>
     <JAVADOC />
     <SOURCES>
\ No newline at end of file
Index: JustPracticeLog.iml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- JustPracticeLog.iml	(revision 34207d752b92643b26623e0458fbc6c60e8112d4)
+++ JustPracticeLog.iml	(revision )
@@ -1,17 +1,17 @@
 <?xml version="1.0" encoding="UTF-8"?>
-<module external.linked.project.id="JustPracticeLog" external.linked.project.path="$MODULE_DIR$" external.root.project.path="$MODULE_DIR$" external.system.id="GRADLE" external.system.module.group="" external.system.module.version="unspecified" type="JAVA_MODULE" version="4">
+<module external.linked.project.id="JustPracticeLog" external.linked.project.path="$USER_HOME$/Dvlp/AndroidStudioProjects/JustPracticeLog" external.root.project.path="$MODULE_DIR$" external.system.id="GRADLE" external.system.module.group="" external.system.module.version="unspecified" type="JAVA_MODULE" version="4">
   <component name="FacetManager">
     <facet type="java-gradle" name="Java-Gradle">
       <configuration>
-        <option name="BUILD_FOLDER_PATH" value="$MODULE_DIR$/build" />
+        <option name="BUILD_FOLDER_PATH" value="$USER_HOME$/Dvlp/AndroidStudioProjects/JustPracticeLog/build" />
         <option name="BUILDABLE" value="false" />
       </configuration>
     </facet>
   </component>
   <component name="NewModuleRootManager" LANGUAGE_LEVEL="JDK_1_7" inherit-compiler-output="true">
     <exclude-output />
-    <content url="file://$MODULE_DIR$">
-      <excludeFolder url="file://$MODULE_DIR$/.gradle" />
+    <content url="file://$USER_HOME$/Dvlp/AndroidStudioProjects/JustPracticeLog">
+      <excludeFolder url="file://$USER_HOME$/Dvlp/AndroidStudioProjects/JustPracticeLog/.gradle" />
     </content>
     <orderEntry type="inheritedJdk" />
     <orderEntry type="sourceFolder" forTests="false" />
\ No newline at end of file
Index: app/src/main/res/layout/activity_piece_view.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/res/layout/activity_piece_view.xml	(revision 34207d752b92643b26623e0458fbc6c60e8112d4)
+++ app/src/main/res/layout/activity_piece_view.xml	(revision )
@@ -17,116 +17,117 @@
         <ImageButton
             android:layout_width="wrap_content"
             android:layout_height="wrap_content"
-            android:src="@drawable/back"
-            android:layout_gravity="center_vertical"
             android:onClick="backButtonHandler"
-            />
+            android:src="@drawable/back" />
 
-        <EditText
-            android:id="@+id/editTextPiece"
-            android:layout_width="wrap_content"
+        <LinearLayout
+            android:layout_width="match_parent"
             android:layout_height="wrap_content"
-            android:layout_weight="1"
-            android:ems="10"
-            android:hint="Rename piece"
-            android:inputType="textPersonName" />
+            android:gravity="right"
+            android:orientation="horizontal">
 
-        <ImageButton
-            android:layout_width="wrap_content"
-            android:layout_height="wrap_content"
+            <ImageButton
+                android:layout_width="wrap_content"
+                android:layout_height="wrap_content"
-            android:src="@drawable/save"
-            android:layout_gravity="center_vertical"
-            android:onClick="renameButtonHandler"
+                android:onClick="renameButtonHandler"
-            />
+                android:src="@drawable/save" />
+
-        <ImageButton
-            android:layout_width="wrap_content"
-            android:layout_height="wrap_content"
+            <ImageButton
+                android:layout_width="wrap_content"
+                android:layout_height="wrap_content"
-            android:src="@drawable/trash"
-            android:layout_gravity="center_vertical"
+                android:layout_gravity="right"
-            android:onClick="deleteButtonHandler"
+                android:onClick="deleteButtonHandler"
-            />
+                android:src="@drawable/trash" />
-    </LinearLayout>
+        </LinearLayout>
+    </LinearLayout>
 
+    <EditText
+        android:id="@+id/editTextPiece"
+        android:layout_width="fill_parent"
+        android:layout_height="wrap_content"
+        android:ems="10"
+        android:hint="Rename piece"
+        android:inputType="textPersonName" />
+
     <LinearLayout
         android:layout_width="fill_parent"
         android:layout_height="1dp"
-        android:layout_marginTop="10dp"
         android:layout_marginBottom="10dp"
+        android:layout_marginTop="10dp"
+        android:background="#000000"
         android:focusable="true"
-        android:focusableInTouchMode="true"
-        android:background="#000000">
+        android:focusableInTouchMode="true">
 
     </LinearLayout>
+
     <LinearLayout
         android:layout_width="fill_parent"
         android:layout_height="fill_parent"
         android:layout_gravity="center_horizontal"
         android:layout_weight="1"
-        android:orientation="horizontal"
-        >
+        android:orientation="horizontal">
 
         <Button
             android:id="@+id/button"
             android:layout_width="fill_parent"
             android:layout_height="160dp"
-            android:padding="18dp"
             android:layout_gravity="center"
             android:layout_weight="1"
-            android:drawableTop="@drawable/plan_blue_64"
             android:background="@android:color/transparent"
-            android:textColor="#0000ff"
-            android:text="Add to plan"
+            android:drawableTop="@drawable/plan_blue_64"
             android:onClick="planButtonHandler"
-            />
+            android:padding="18dp"
+            android:text="Add to plan"
+            android:textColor="#0000ff" />
 
         <Button
             android:id="@+id/button2"
             android:layout_width="fill_parent"
             android:layout_height="160dp"
-            android:padding="18dp"
             android:layout_gravity="center"
             android:layout_weight="1"
-            android:drawableTop="@drawable/practice_blue_64"
             android:background="@android:color/transparent"
-            android:textColor="#0000ff"
+            android:drawableTop="@drawable/practice_blue_64"
+            android:onClick="practiceButtonHandler"
+            android:padding="18dp"
             android:text="Practice"
-            android:onClick="practiceButtonHandler" />
+            android:textColor="#0000ff" />
 
 
     </LinearLayout>
+
     <LinearLayout
         android:layout_width="fill_parent"
         android:layout_height="fill_parent"
         android:layout_gravity="center_horizontal"
         android:layout_weight="1"
-        android:orientation="horizontal"
-        >
+        android:orientation="horizontal">
 
         <Button
             android:layout_width="fill_parent"
             android:layout_height="160dp"
-            android:padding="18dp"
-            android:layout_gravity="center"
             android:layout_column="0"
+            android:layout_gravity="center"
             android:layout_weight="1"
-            android:drawableTop="@drawable/friends_blue_64"
             android:background="@android:color/transparent"
-            android:textColor="#0000ff"
+            android:drawableTop="@drawable/friends_blue_64"
             android:onClick="recitalButtonHandler"
-            android:text="Add to recital" />
+            android:padding="18dp"
+            android:text="Add to recital"
+            android:textColor="#0000ff" />
 
         <Button
             android:layout_width="fill_parent"
             android:layout_height="160dp"
-            android:padding="18dp"
-            android:layout_gravity="center"
             android:layout_column="1"
+            android:layout_gravity="center"
             android:layout_weight="1"
-            android:drawableTop="@drawable/search_blue_64"
             android:background="@android:color/transparent"
-            android:textColor="#0000ff"
+            android:drawableTop="@drawable/search_blue_64"
             android:onClick="searchButtonHandler"
-            android:text="Web search" />
+            android:padding="18dp"
+            android:text="Web search"
+            android:textColor="#0000ff" />
 
 
     </LinearLayout>
Index: build/intermediates/dex-cache/cache.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- build/intermediates/dex-cache/cache.xml	(revision 34207d752b92643b26623e0458fbc6c60e8112d4)
+++ build/intermediates/dex-cache/cache.xml	(revision )
@@ -2,11 +2,11 @@
 <items version="2" >
 
     <item
-        jar="/home/malcolm/Android/Sdk/extras/android/m2repository/com/android/support/support-annotations/22.2.0/support-annotations-22.2.0.jar"
+        jar="/home/malcolm/Dvlp/AndroidStudioProjects/JustPracticeLog/app/build/intermediates/exploded-aar/com.android.support/appcompat-v7/22.2.0/jars/classes.jar"
         jumboMode="false"
         revision="22.0.1"
-        sha1="66b42a1f3eb7676070b7ef7f14b603483aecbee1">
-        <dex dex="/home/malcolm/Dvlp/AndroidStudioProjects/JustPracticeLog/app/build/intermediates/pre-dexed/debug/support-annotations-22.2.0-ec344b00842330b3a85ca00578846d843599b168.jar" />
+        sha1="73753982da6bde518f3a4c6b372749981d14d1a0">
+        <dex dex="/home/malcolm/Dvlp/AndroidStudioProjects/JustPracticeLog/app/build/intermediates/pre-dexed/debug/classes-951772f424ddfc62ae023f73d57291b34426a5f4.jar" />
     </item>
     <item
         jar="/home/malcolm/Dvlp/AndroidStudioProjects/JustPracticeLog/app/build/intermediates/exploded-aar/com.android.support/support-v4/22.2.0/jars/classes.jar"
@@ -16,18 +16,18 @@
         <dex dex="/home/malcolm/Dvlp/AndroidStudioProjects/JustPracticeLog/app/build/intermediates/pre-dexed/debug/classes-1f3e779e8b835dc7a08da87576035fbbb5cd2a70.jar" />
     </item>
     <item
-        jar="/home/malcolm/Dvlp/AndroidStudioProjects/JustPracticeLog/app/build/intermediates/exploded-aar/com.android.support/appcompat-v7/22.2.0/jars/classes.jar"
+        jar="/home/malcolm/Dvlp/AndroidStudioProjects/JustPracticeLog/app/build/intermediates/exploded-aar/com.android.support/support-v4/22.2.0/jars/libs/internal_impl-22.2.0.jar"
         jumboMode="false"
         revision="22.0.1"
-        sha1="73753982da6bde518f3a4c6b372749981d14d1a0">
-        <dex dex="/home/malcolm/Dvlp/AndroidStudioProjects/JustPracticeLog/app/build/intermediates/pre-dexed/debug/classes-951772f424ddfc62ae023f73d57291b34426a5f4.jar" />
+        sha1="57f2ab85c164ff1676ec64dee787981c046fab79">
+        <dex dex="/home/malcolm/Dvlp/AndroidStudioProjects/JustPracticeLog/app/build/intermediates/pre-dexed/debug/internal_impl-22.2.0-9a08f2c4a63f58e799222de87bc51085e4ecebb1.jar" />
     </item>
     <item
-        jar="/home/malcolm/Dvlp/AndroidStudioProjects/JustPracticeLog/app/build/intermediates/exploded-aar/com.android.support/support-v4/22.2.0/jars/libs/internal_impl-22.2.0.jar"
+        jar="/home/malcolm/Android/Sdk/extras/android/m2repository/com/android/support/support-annotations/22.2.0/support-annotations-22.2.0.jar"
         jumboMode="false"
         revision="22.0.1"
-        sha1="57f2ab85c164ff1676ec64dee787981c046fab79">
-        <dex dex="/home/malcolm/Dvlp/AndroidStudioProjects/JustPracticeLog/app/build/intermediates/pre-dexed/debug/internal_impl-22.2.0-9a08f2c4a63f58e799222de87bc51085e4ecebb1.jar" />
+        sha1="66b42a1f3eb7676070b7ef7f14b603483aecbee1">
+        <dex dex="/home/malcolm/Dvlp/AndroidStudioProjects/JustPracticeLog/app/build/intermediates/pre-dexed/debug/support-annotations-22.2.0-ec344b00842330b3a85ca00578846d843599b168.jar" />
     </item>
 
 </items>
Index: app/app.iml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/app.iml	(revision 34207d752b92643b26623e0458fbc6c60e8112d4)
+++ app/app.iml	(revision )
@@ -1,5 +1,5 @@
 <?xml version="1.0" encoding="UTF-8"?>
-<module external.linked.project.id=":app" external.linked.project.path="$MODULE_DIR$" external.root.project.path="$MODULE_DIR$/.." external.system.id="GRADLE" external.system.module.group="JustPracticeLog" external.system.module.version="unspecified" type="JAVA_MODULE" version="4">
+<module external.linked.project.id=":app" external.linked.project.path="$USER_HOME$/Dvlp/AndroidStudioProjects/JustPracticeLog/app" external.root.project.path="$MODULE_DIR$/.." external.system.id="GRADLE" external.system.module.group="JustPracticeLog" external.system.module.version="unspecified" type="JAVA_MODULE" version="4">
   <component name="FacetManager">
     <facet type="android-gradle" name="Android-Gradle">
       <configuration>
@@ -21,72 +21,65 @@
         <option name="ALLOW_USER_CONFIGURATION" value="false" />
         <option name="MANIFEST_FILE_RELATIVE_PATH" value="/src/main/AndroidManifest.xml" />
         <option name="RES_FOLDER_RELATIVE_PATH" value="/src/main/res" />
-        <option name="RES_FOLDERS_RELATIVE_PATH" value="file://$MODULE_DIR$/src/main/res" />
+        <option name="RES_FOLDERS_RELATIVE_PATH" value="file://$USER_HOME$/Dvlp/AndroidStudioProjects/JustPracticeLog/app/src/main/res" />
         <option name="ASSETS_FOLDER_RELATIVE_PATH" value="/src/main/assets" />
       </configuration>
     </facet>
   </component>
   <component name="NewModuleRootManager" LANGUAGE_LEVEL="JDK_1_7" inherit-compiler-output="false">
-    <output url="file://$MODULE_DIR$/build/intermediates/classes/debug" />
-    <output-test url="file://$MODULE_DIR$/build/intermediates/classes/androidTest/debug" />
+    <output url="file://$USER_HOME$/Dvlp/AndroidStudioProjects/JustPracticeLog/app/build/intermediates/classes/debug" />
+    <output-test url="file://$USER_HOME$/Dvlp/AndroidStudioProjects/JustPracticeLog/app/build/intermediates/classes/androidTest/debug" />
     <exclude-output />
-    <content url="file://$MODULE_DIR$">
-      <sourceFolder url="file://$MODULE_DIR$/build/generated/source/r/debug" isTestSource="false" generated="true" />
-      <sourceFolder url="file://$MODULE_DIR$/build/generated/source/aidl/debug" isTestSource="false" generated="true" />
-      <sourceFolder url="file://$MODULE_DIR$/build/generated/source/buildConfig/debug" isTestSource="false" generated="true" />
-      <sourceFolder url="file://$MODULE_DIR$/build/generated/source/rs/debug" isTestSource="false" generated="true" />
-      <sourceFolder url="file://$MODULE_DIR$/build/generated/res/rs/debug" type="java-resource" />
-      <sourceFolder url="file://$MODULE_DIR$/build/generated/res/generated/debug" type="java-resource" />
-      <sourceFolder url="file://$MODULE_DIR$/build/generated/source/r/androidTest/debug" isTestSource="true" generated="true" />
-      <sourceFolder url="file://$MODULE_DIR$/build/generated/source/aidl/androidTest/debug" isTestSource="true" generated="true" />
-      <sourceFolder url="file://$MODULE_DIR$/build/generated/source/buildConfig/androidTest/debug" isTestSource="true" generated="true" />
-      <sourceFolder url="file://$MODULE_DIR$/build/generated/source/rs/androidTest/debug" isTestSource="true" generated="true" />
-      <sourceFolder url="file://$MODULE_DIR$/build/generated/res/rs/androidTest/debug" type="java-test-resource" />
-      <sourceFolder url="file://$MODULE_DIR$/build/generated/res/generated/androidTest/debug" type="java-test-resource" />
-      <sourceFolder url="file://$MODULE_DIR$/src/debug/res" type="java-resource" />
-      <sourceFolder url="file://$MODULE_DIR$/src/debug/resources" type="java-resource" />
-      <sourceFolder url="file://$MODULE_DIR$/src/debug/assets" type="java-resource" />
-      <sourceFolder url="file://$MODULE_DIR$/src/debug/aidl" isTestSource="false" />
-      <sourceFolder url="file://$MODULE_DIR$/src/debug/java" isTestSource="false" />
-      <sourceFolder url="file://$MODULE_DIR$/src/debug/jni" isTestSource="false" />
-      <sourceFolder url="file://$MODULE_DIR$/src/debug/rs" isTestSource="false" />
-      <sourceFolder url="file://$MODULE_DIR$/src/main/res" type="java-resource" />
-      <sourceFolder url="file://$MODULE_DIR$/src/main/resources" type="java-resource" />
-      <sourceFolder url="file://$MODULE_DIR$/src/main/assets" type="java-resource" />
-      <sourceFolder url="file://$MODULE_DIR$/src/main/aidl" isTestSource="false" />
-      <sourceFolder url="file://$MODULE_DIR$/src/main/java" isTestSource="false" />
-      <sourceFolder url="file://$MODULE_DIR$/src/main/jni" isTestSource="false" />
-      <sourceFolder url="file://$MODULE_DIR$/src/main/rs" isTestSource="false" />
-      <sourceFolder url="file://$MODULE_DIR$/src/androidTest/res" type="java-test-resource" />
-      <sourceFolder url="file://$MODULE_DIR$/src/androidTest/resources" type="java-test-resource" />
-      <sourceFolder url="file://$MODULE_DIR$/src/androidTest/assets" type="java-test-resource" />
-      <sourceFolder url="file://$MODULE_DIR$/src/androidTest/aidl" isTestSource="true" />
-      <sourceFolder url="file://$MODULE_DIR$/src/androidTest/java" isTestSource="true" />
-      <sourceFolder url="file://$MODULE_DIR$/src/androidTest/jni" isTestSource="true" />
-      <sourceFolder url="file://$MODULE_DIR$/src/androidTest/rs" isTestSource="true" />
-      <excludeFolder url="file://$MODULE_DIR$/build/intermediates/assets" />
-      <excludeFolder url="file://$MODULE_DIR$/build/intermediates/bundles" />
-      <excludeFolder url="file://$MODULE_DIR$/build/intermediates/classes" />
-      <excludeFolder url="file://$MODULE_DIR$/build/intermediates/coverage-instrumented-classes" />
-      <excludeFolder url="file://$MODULE_DIR$/build/intermediates/dependency-cache" />
-      <excludeFolder url="file://$MODULE_DIR$/build/intermediates/dex" />
-      <excludeFolder url="file://$MODULE_DIR$/build/intermediates/dex-cache" />
-      <excludeFolder url="file://$MODULE_DIR$/build/intermediates/exploded-aar/com.android.support/appcompat-v7/22.2.0/jars" />
-      <excludeFolder url="file://$MODULE_DIR$/build/intermediates/exploded-aar/com.android.support/support-v4/22.2.0/jars" />
-      <excludeFolder url="file://$MODULE_DIR$/build/intermediates/incremental" />
-      <excludeFolder url="file://$MODULE_DIR$/build/intermediates/jacoco" />
-      <excludeFolder url="file://$MODULE_DIR$/build/intermediates/javaResources" />
-      <excludeFolder url="file://$MODULE_DIR$/build/intermediates/libs" />
-      <excludeFolder url="file://$MODULE_DIR$/build/intermediates/lint" />
-      <excludeFolder url="file://$MODULE_DIR$/build/intermediates/manifests" />
-      <excludeFolder url="file://$MODULE_DIR$/build/intermediates/ndk" />
-      <excludeFolder url="file://$MODULE_DIR$/build/intermediates/pre-dexed" />
-      <excludeFolder url="file://$MODULE_DIR$/build/intermediates/proguard" />
-      <excludeFolder url="file://$MODULE_DIR$/build/intermediates/res" />
-      <excludeFolder url="file://$MODULE_DIR$/build/intermediates/rs" />
-      <excludeFolder url="file://$MODULE_DIR$/build/intermediates/symbols" />
-      <excludeFolder url="file://$MODULE_DIR$/build/outputs" />
-      <excludeFolder url="file://$MODULE_DIR$/build/tmp" />
+    <content url="file://$USER_HOME$/Dvlp/AndroidStudioProjects/JustPracticeLog/app">
+      <sourceFolder url="file://$USER_HOME$/Dvlp/AndroidStudioProjects/JustPracticeLog/app/build/generated/source/r/debug" isTestSource="false" generated="true" />
+      <sourceFolder url="file://$USER_HOME$/Dvlp/AndroidStudioProjects/JustPracticeLog/app/build/generated/source/aidl/debug" isTestSource="false" generated="true" />
+      <sourceFolder url="file://$USER_HOME$/Dvlp/AndroidStudioProjects/JustPracticeLog/app/build/generated/source/buildConfig/debug" isTestSource="false" generated="true" />
+      <sourceFolder url="file://$USER_HOME$/Dvlp/AndroidStudioProjects/JustPracticeLog/app/build/generated/source/rs/debug" isTestSource="false" generated="true" />
+      <sourceFolder url="file://$USER_HOME$/Dvlp/AndroidStudioProjects/JustPracticeLog/app/build/generated/res/rs/debug" type="java-resource" />
+      <sourceFolder url="file://$USER_HOME$/Dvlp/AndroidStudioProjects/JustPracticeLog/app/build/generated/res/generated/debug" type="java-resource" />
+      <sourceFolder url="file://$USER_HOME$/Dvlp/AndroidStudioProjects/JustPracticeLog/app/build/generated/source/r/androidTest/debug" isTestSource="true" generated="true" />
+      <sourceFolder url="file://$USER_HOME$/Dvlp/AndroidStudioProjects/JustPracticeLog/app/build/generated/source/aidl/androidTest/debug" isTestSource="true" generated="true" />
+      <sourceFolder url="file://$USER_HOME$/Dvlp/AndroidStudioProjects/JustPracticeLog/app/build/generated/source/buildConfig/androidTest/debug" isTestSource="true" generated="true" />
+      <sourceFolder url="file://$USER_HOME$/Dvlp/AndroidStudioProjects/JustPracticeLog/app/build/generated/source/rs/androidTest/debug" isTestSource="true" generated="true" />
+      <sourceFolder url="file://$USER_HOME$/Dvlp/AndroidStudioProjects/JustPracticeLog/app/build/generated/res/rs/androidTest/debug" type="java-test-resource" />
+      <sourceFolder url="file://$USER_HOME$/Dvlp/AndroidStudioProjects/JustPracticeLog/app/build/generated/res/generated/androidTest/debug" type="java-test-resource" />
+      <sourceFolder url="file://$USER_HOME$/Dvlp/AndroidStudioProjects/JustPracticeLog/app/src/debug/res" type="java-resource" />
+      <sourceFolder url="file://$USER_HOME$/Dvlp/AndroidStudioProjects/JustPracticeLog/app/src/debug/resources" type="java-resource" />
+      <sourceFolder url="file://$USER_HOME$/Dvlp/AndroidStudioProjects/JustPracticeLog/app/src/debug/assets" type="java-resource" />
+      <sourceFolder url="file://$USER_HOME$/Dvlp/AndroidStudioProjects/JustPracticeLog/app/src/debug/aidl" isTestSource="false" />
+      <sourceFolder url="file://$USER_HOME$/Dvlp/AndroidStudioProjects/JustPracticeLog/app/src/debug/java" isTestSource="false" />
+      <sourceFolder url="file://$USER_HOME$/Dvlp/AndroidStudioProjects/JustPracticeLog/app/src/debug/jni" isTestSource="false" />
+      <sourceFolder url="file://$USER_HOME$/Dvlp/AndroidStudioProjects/JustPracticeLog/app/src/debug/rs" isTestSource="false" />
+      <sourceFolder url="file://$USER_HOME$/Dvlp/AndroidStudioProjects/JustPracticeLog/app/src/main/res" type="java-resource" />
+      <sourceFolder url="file://$USER_HOME$/Dvlp/AndroidStudioProjects/JustPracticeLog/app/src/main/resources" type="java-resource" />
+      <sourceFolder url="file://$USER_HOME$/Dvlp/AndroidStudioProjects/JustPracticeLog/app/src/main/assets" type="java-resource" />
+      <sourceFolder url="file://$USER_HOME$/Dvlp/AndroidStudioProjects/JustPracticeLog/app/src/main/aidl" isTestSource="false" />
+      <sourceFolder url="file://$USER_HOME$/Dvlp/AndroidStudioProjects/JustPracticeLog/app/src/main/java" isTestSource="false" />
+      <sourceFolder url="file://$USER_HOME$/Dvlp/AndroidStudioProjects/JustPracticeLog/app/src/main/jni" isTestSource="false" />
+      <sourceFolder url="file://$USER_HOME$/Dvlp/AndroidStudioProjects/JustPracticeLog/app/src/main/rs" isTestSource="false" />
+      <sourceFolder url="file://$USER_HOME$/Dvlp/AndroidStudioProjects/JustPracticeLog/app/src/androidTest/res" type="java-test-resource" />
+      <sourceFolder url="file://$USER_HOME$/Dvlp/AndroidStudioProjects/JustPracticeLog/app/src/androidTest/resources" type="java-test-resource" />
+      <sourceFolder url="file://$USER_HOME$/Dvlp/AndroidStudioProjects/JustPracticeLog/app/src/androidTest/assets" type="java-test-resource" />
+      <sourceFolder url="file://$USER_HOME$/Dvlp/AndroidStudioProjects/JustPracticeLog/app/src/androidTest/aidl" isTestSource="true" />
+      <sourceFolder url="file://$USER_HOME$/Dvlp/AndroidStudioProjects/JustPracticeLog/app/src/androidTest/java" isTestSource="true" />
+      <sourceFolder url="file://$USER_HOME$/Dvlp/AndroidStudioProjects/JustPracticeLog/app/src/androidTest/jni" isTestSource="true" />
+      <sourceFolder url="file://$USER_HOME$/Dvlp/AndroidStudioProjects/JustPracticeLog/app/src/androidTest/rs" isTestSource="true" />
+      <excludeFolder url="file://$USER_HOME$/Dvlp/AndroidStudioProjects/JustPracticeLog/app/build/intermediates/assets" />
+      <excludeFolder url="file://$USER_HOME$/Dvlp/AndroidStudioProjects/JustPracticeLog/app/build/intermediates/classes" />
+      <excludeFolder url="file://$USER_HOME$/Dvlp/AndroidStudioProjects/JustPracticeLog/app/build/intermediates/dependency-cache" />
+      <excludeFolder url="file://$USER_HOME$/Dvlp/AndroidStudioProjects/JustPracticeLog/app/build/intermediates/dex" />
+      <excludeFolder url="file://$USER_HOME$/Dvlp/AndroidStudioProjects/JustPracticeLog/app/build/intermediates/exploded-aar/com.android.support/appcompat-v7/22.2.0/jars" />
+      <excludeFolder url="file://$USER_HOME$/Dvlp/AndroidStudioProjects/JustPracticeLog/app/build/intermediates/exploded-aar/com.android.support/support-v4/22.2.0/jars" />
+      <excludeFolder url="file://$USER_HOME$/Dvlp/AndroidStudioProjects/JustPracticeLog/app/build/intermediates/incremental" />
+      <excludeFolder url="file://$USER_HOME$/Dvlp/AndroidStudioProjects/JustPracticeLog/app/build/intermediates/manifests" />
+      <excludeFolder url="file://$USER_HOME$/Dvlp/AndroidStudioProjects/JustPracticeLog/app/build/intermediates/pre-dexed" />
+      <excludeFolder url="file://$USER_HOME$/Dvlp/AndroidStudioProjects/JustPracticeLog/app/build/intermediates/res" />
+      <excludeFolder url="file://$USER_HOME$/Dvlp/AndroidStudioProjects/JustPracticeLog/app/build/intermediates/resources" />
+      <excludeFolder url="file://$USER_HOME$/Dvlp/AndroidStudioProjects/JustPracticeLog/app/build/intermediates/rs" />
+      <excludeFolder url="file://$USER_HOME$/Dvlp/AndroidStudioProjects/JustPracticeLog/app/build/intermediates/symbols" />
+      <excludeFolder url="file://$USER_HOME$/Dvlp/AndroidStudioProjects/JustPracticeLog/app/build/intermediates/tmp" />
+      <excludeFolder url="file://$USER_HOME$/Dvlp/AndroidStudioProjects/JustPracticeLog/app/build/outputs" />
+      <excludeFolder url="file://$USER_HOME$/Dvlp/AndroidStudioProjects/JustPracticeLog/app/build/tmp" />
     </content>
     <orderEntry type="jdk" jdkName="Android API 22 Platform" jdkType="Android SDK" />
     <orderEntry type="sourceFolder" forTests="false" />
\ No newline at end of file
Index: app/src/main/java/com/example/malcolm/justpracticelog/Plan.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/java/com/example/malcolm/justpracticelog/Plan.java	(revision 34207d752b92643b26623e0458fbc6c60e8112d4)
+++ app/src/main/java/com/example/malcolm/justpracticelog/Plan.java	(revision )
@@ -1,6 +1,7 @@
 package com.example.malcolm.justpracticelog;
 
 import android.os.Bundle;
+import android.util.Log;
 
 import java.io.BufferedReader;
 import java.io.File;
@@ -28,6 +29,7 @@
 
     final static String DB_FILE_NAME = "plans.txt";
     private static Map<Long, Plan> plans;
+    final static String TAG = "Plan";
 
     public Plan() {
         setMyid(Database.generateUniqueId());
@@ -208,18 +210,31 @@
 
     public static void changePlanPriority(Plan plan) {
         plans.remove(plan.getMyid());
+        plans.put(plan.getMyid(),plan);
+        int newPriority = plan.getPriority();
         List<Plan> lplans = getAllPlans();
+        // printPlansToLog("Before change", lplans);
+        // All plan items with greater or equal priority need to be incremented
+        for( Plan item : lplans) {
+            if ( item.getMyid() != plan.getMyid()) {
+                if (item.getPriority() >= newPriority)
+                    item.setPriority(item.getPriority() + 1);
+            }
+        }
+        // Now re-sort list based on priority
         Collections.sort(lplans, new Comparator<Plan>() {
             public int compare(Plan s1, Plan s2) {
                 return (s1.getPriority() - s2.getPriority());
 
             }
         });
-        if (plan.getPriority() >= lplans.size())
-            lplans.add(plan);
-        else
-            lplans.set(plan.getPriority() - 1, plan);
-        renumberPlansPriorities(lplans);
+        // printPlansToLog("After sort", lplans);
+
+        //if (plan.getPriority() >= lplans.size())
+         //   lplans.add(plan);
+        //else
+         //   lplans.set(plan.getPriority() - 1, plan);
+        // renumberPlansPriorities(lplans);
         saveDatabase();
     }
 
@@ -241,6 +256,12 @@
             }
         });
         renumberPlansPriorities(lplans);
+    }
+    public static void  printPlansToLog(String msg, List<Plan> lplans) {
+        for( Plan item: lplans) {
+            Piece piece = new Piece(item.getPieceId());
+            Log.d(TAG, msg + ":" + item.getPriority() + " " + piece.getName());
+        }
     }
     // CRUD interface:create, read, update, delete
 
Index: .idea/gradle.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- .idea/gradle.xml	(revision 34207d752b92643b26623e0458fbc6c60e8112d4)
+++ .idea/gradle.xml	(revision )
@@ -5,12 +5,12 @@
       <GradleProjectSettings>
         <option name="distributionType" value="LOCAL" />
         <option name="externalProjectPath" value="$PROJECT_DIR$" />
-        <option name="gradleHome" value="$APPLICATION_HOME_DIR$/gradle/gradle-2.4" />
+        <option name="gradleHome" value="$APPLICATION_HOME_DIR$/gradle/gradle-2.8" />
         <option name="gradleJvm" value="1.8" />
         <option name="modules">
           <set>
-            <option value="$PROJECT_DIR$" />
-            <option value="$PROJECT_DIR$/app" />
+            <option value="$USER_HOME$/Dvlp/AndroidStudioProjects/JustPracticeLog" />
+            <option value="$USER_HOME$/Dvlp/AndroidStudioProjects/JustPracticeLog/app" />
           </set>
         </option>
       </GradleProjectSettings>
\ No newline at end of file
Index: app/src/main/res/layout-sw600dp/activity_practice_session.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/res/layout-sw600dp/activity_practice_session.xml	(revision 34207d752b92643b26623e0458fbc6c60e8112d4)
+++ app/src/main/res/layout-sw600dp/activity_practice_session.xml	(revision )
@@ -4,8 +4,7 @@
     android:layout_height="match_parent"
     android:background="#fff"
     android:orientation="vertical"
-    android:paddingLeft="@dimen/activity_horizontal_margin"
-    android:paddingRight="@dimen/activity_horizontal_margin"
+
     android:paddingTop="@dimen/activity_vertical_margin"
     tools:context="com.example.malcolm.justpracticelog.PracticeSessionActivity">
 
@@ -132,7 +131,7 @@
             <LinearLayout
                 android:layout_width="fill_parent"
                 android:layout_height="wrap_content"
-                android:layout_margin="20dp"
+                android:layout_marginLeft="20dp"
                 android:orientation="horizontal">
 
                 <TextView
@@ -168,7 +167,7 @@
             <LinearLayout
                 android:layout_width="fill_parent"
                 android:layout_height="wrap_content"
-                android:layout_margin="20dp"
+                android:layout_marginLeft="20dp"
                 android:orientation="horizontal">
 
                 <TextView
@@ -230,8 +229,38 @@
                     android:layout_marginTop="10dp"
                     android:layout_marginBottom="10dp"
                     />
+                <LinearLayout
+                    android:layout_width="fill_parent"
+                    android:layout_height="wrap_content"
+                    android:layout_margin="20dp"
+                    android:orientation="horizontal">
+
+                    <Button
+                        android:layout_width="wrap_content"
+                        android:layout_height="wrap_content"
+                        android:layout_gravity="center_vertical"
+                        android:layout_weight="1"
+                        android:layout_marginLeft="20dp"
+                        android:text="Cancel"
+                        android:background="@android:color/holo_red_light"
+                        android:textAppearance="?android:attr/textAppearanceLarge"
+                        android:onClick="backButtonHandler"
+                        />
+                    <Button
+                        android:layout_width="wrap_content"
+                        android:layout_height="wrap_content"
+                        android:layout_gravity="center_vertical"
+                        android:layout_weight="1"
+                        android:layout_marginLeft="20dp"
+                        android:layout_marginRight="20dp"
+                        android:text="Save"
+                        android:background="@android:color/holo_green_light"
+                        android:textAppearance="?android:attr/textAppearanceLarge"
+                        android:onClick="saveSessionButtonHandler"
+                        />
-            </LinearLayout>
-        </LinearLayout>
+                </LinearLayout>
+            </LinearLayout>
+        </LinearLayout>
 
         <LinearLayout
             android:layout_width="fill_parent"
@@ -248,4 +277,5 @@
         </LinearLayout>
 
     </LinearLayout>
+
 </LinearLayout>
\ No newline at end of file
Index: app/src/main/java/com/example/malcolm/justpracticelog/PracticeTimer.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/java/com/example/malcolm/justpracticelog/PracticeTimer.java	(revision 34207d752b92643b26623e0458fbc6c60e8112d4)
+++ app/src/main/java/com/example/malcolm/justpracticelog/PracticeTimer.java	(revision )
@@ -2,6 +2,7 @@
 
 import android.app.Activity;
 import android.media.MediaPlayer;
+import android.util.Log;
 import android.view.View;
 import android.widget.ImageButton;
 import android.widget.TextView;
@@ -21,15 +22,18 @@
     //	ImageButton timerAlarmButton;
     Activity parent;
     MediaPlayer mediaPlayer;
+    final static String TAG = "PracticeTimer";
 
-    PracticeTimer(PracticeSessionActivity parent, int startCounter) {
-        this.parent = parent;
+    PracticeTimer(PracticeSessionActivity parent, int startCounter, int elapsedSeconds) {
+        Log.d(TAG, "PracticeTimer: startCounter " + startCounter + " elapsedSeconds " + elapsedSeconds);
 
+        this.parent = parent;
+        this.elapsedSeconds = elapsedSeconds;
         timerButton = (ImageButton) parent.findViewById(R.id.timerButton);
         timerButton.setOnClickListener(new timerToggle());
 //		timerAlarmButton = (ImageButton)parent.findViewById(R.id.timerAlarm);
         timerElapsedTextView = (TextView) parent.findViewById(R.id.textViewTimerElapsed);
-        timerElapsedTextView.setText(MyTime.toString(MyTime.now()));
+//        timerElapsedTextView.setText(MyTime.toString(MyTime.now()));
 
         timerStartHms = MyTime.now();
         timerStartYmd = MyDate.today();
Index: app/src/main/java/com/example/malcolm/justpracticelog/PieceViewActivity.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/java/com/example/malcolm/justpracticelog/PieceViewActivity.java	(revision 34207d752b92643b26623e0458fbc6c60e8112d4)
+++ app/src/main/java/com/example/malcolm/justpracticelog/PieceViewActivity.java	(revision )
@@ -79,8 +79,8 @@
         if ( piece != null)
             Toast.makeText(getApplicationContext(), "Already exists", Toast.LENGTH_SHORT).show();
         else {
-            piece.setName(name);
-            Piece.update(piece);
+            currentPiece.setName(name);
+            Piece.update(currentPiece);
             setResult(Activity.RESULT_OK, null);
             finish();
         }
